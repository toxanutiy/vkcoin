{"version":3,"sources":["panels/Upgrades.js","App.js","index.js"],"names":["Upgrades","upgrades","this","props","Object","keys","map","key","react_default","a","createElement","vkui","style","height","borderRadius","marginLeft","textAlign","className","width","name","amount","mine","React","Component","socket","io","secure","App","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","click","setState","prevState","user","objectSpread","balance","openShop","popout","marginTop","borderTopLeftRadius","borderTopRightRadius","aside","cancel_default","onClick","closeShop","fontWeight","overflow","maxHeight","react_list_default","itemRenderer","renderShopItem","length","state","shop","type","buyItem","_ref","asyncToGenerator","regenerator_default","mark","_callee","item","wrap","_context","prev","next","parseInt","abrupt","emit","stop","_x","apply","arguments","go","e","activePanel","currentTarget","dataset","to","error","online","bind","assertThisInitialized","_this2","connect","subscribe","detail","console","log","window","location","search","on","setInterval","auto","index","_this3","float","disabled","parseFloat","header","id","display","alignItems","flexDirection","level","panels_Upgrades","PanelSpinner_default","padding","fontSize","send","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.17215aa9.chunk.js","sourcesContent":["import React from \"react\";\r\nimport {Div, Group} from '@vkontakte/vkui';\r\n\r\nclass Upgrades extends React.Component {\r\n    render() {\r\n        const upgrades = this.props.upgrades;\r\n        return (\r\n            Object.keys(upgrades).map((key) => (\r\n                <Group key={key} style={{height: \"60px\", borderRadius: \"20px\", marginLeft: \"10px\", textAlign: \"center\"}}>\r\n                    <Div className=\"upgrade\" style={{width: \"185px\"}}>\r\n                        <span className=\"name\">{upgrades[key].name} (x{upgrades[key].amount})</span><br></br>\r\n                        <span className=\"mine\">{upgrades[key].mine}/сек</span>\r\n                    </Div>\r\n                </Group>\r\n            ))\r\n        );\r\n    }\r\n}\r\n\r\nexport default Upgrades;\r\n","import React from 'react';\nimport connect from '@vkontakte/vkui-connect';\nimport {View, Panel, Header, Button, Div, HorizontalScroll, PopoutWrapper, Group} from '@vkontakte/vkui';\nimport PanelSpinner from '@vkontakte/vkui/dist/components/PanelSpinner/PanelSpinner';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport io from 'socket.io-client';\nimport './css/style.css';\nimport Upgrades from './panels/Upgrades.js'\nimport Icon24Cancel from '@vkontakte/icons/dist/24/cancel';\nimport ReactList from 'react-list';\n\nlet socket = io('https://vkcoinadad.tk:8080', {secure: true});\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            activePanel: 'spinner',\n            user: null,\n            popout: null,\n            buyItem: false,\n            error: null,\n            online: 0\n        };\n\n        this.openShop = this.openShop.bind(this);\n        this.renderShopItem = this.renderShopItem.bind(this);\n    }\n\n    componentDidMount() {\n        connect.subscribe((e) => {\n            switch (e.detail.type) {\n                default:\n                    console.log(e.detail.type);\n            }\n        });\n\n        socket.emit('auth', window.location.search);\n\n        socket.on('setUser', user => {\n            this.setState({user: user, activePanel: 'main'});\n        });\n\n        socket.on('buysItem', user => {\n            this.setState({user: user, buyItem: false});\n            if (this.state.popout !== null && !this.state.buyItem) {\n                this.openShop();\n            }\n        });\n\n        socket.on('errorConnect', error => {\n            this.setState({error: error});\n        });\n\n        socket.on('online', online => {\n            this.setState({online: online});\n        });\n\n        setInterval(() => {\n            if (this.state.user !== null && !this.state.buyItem)\n                socket.emit('setScore', this.state.user.balance);\n        }, 500);\n\n        setInterval(() => {\n            if (this.state.popout !== null && !this.state.buyItem) {\n                this.openShop();\n            }\n        }, 1000);\n\n        setInterval(() => {\n            if (this.state.user !== null)\n                this.setState(prevState => ({\n                    user: {\n                        ...prevState.user,\n                        balance: prevState.user.balance + this.state.user.auto\n                    }\n                }));\n        }, 1000);\n    }\n\n    click = () => {\n        this.setState(prevState => ({\n            user: {\n                ...prevState.user,\n                balance: prevState.user.balance + 1\n            }\n        }));\n    };\n\n    renderShopItem (index, key) {\n        return <div key={key}><Group className=\"shop\">\n            <Div className=\"upgrade\">\n                <span className=\"name\">{this.state.user.shop[key]['name']}</span>\n                <span className=\"name\"\n                      style={{float: \"right\"}}>+{this.state.user.shop[key]['mine']}/сек</span>\n                <br></br>\n                <Button\n                    disabled={(parseFloat(this.state.user.balance) < parseFloat(this.state.user.shop[key]['price']))}\n                    onClick={() => this.buyItem(key)}\n                    style={{marginTop: \"10px\"}}>Купить\n                    за {this.state.user.shop[key]['price']}</Button>\n            </Div>\n            <hr></hr>\n        </Group></div>;\n    };\n\n    openShop = () => {\n        this.setState({\n            popout:\n                <PopoutWrapper>\n\n                    <Group style={{\n                        width: \"100%\",\n                        height: \"84%\",\n                        marginTop: \"39%\",\n                        borderTopLeftRadius: \"20px\",\n                        borderTopRightRadius: \"20px\"\n                    }}>\n                        <Div>\n                            <Header aside={<Icon24Cancel onClick={this.closeShop}/>}><span\n                                style={{fontWeight: \"700\"}}>Ускорения</span></Header>\n                            <hr></hr>\n\n                            <div style={{overflow: 'auto', maxHeight: 400}}>\n                                <ReactList\n                                    itemRenderer={this.renderShopItem}\n                                    length={this.state.user.shop.length}\n                                    type='uniform'\n                                />\n                            </div>\n\n                        </Div>\n                    </Group>\n\n                </PopoutWrapper>\n        });\n    };\n\n    closeShop = () => {\n        this.setState({\n            popout: null\n        });\n    };\n\n    buyItem = async (key) => {\n        const item = this.state.user.shop[key];\n\n        if (parseInt(this.state.user.balance) < parseInt(item['price'])) return;\n\n        this.setState({buyItem: true});\n        await socket.emit('buyItem', key);\n    };\n\n    go = (e) => {\n        this.setState({activePanel: e.currentTarget.dataset.to})\n    };\n\n    render() {\n        if (this.state.user !== null) {\n            return (\n                <View popout={this.state.popout} header={false} activePanel={this.state.activePanel}>\n                    <Panel id=\"main\">\n                        <div style={{display: 'flex', alignItems: 'center', flexDirection: 'column'}}>\n                            <Header level=\"2\">Ваш счёт</Header>\n                            <span className=\"balance\">{this.state.user.balance}</span>\n\n                            <Div>\n                                <Button>Топ</Button>\n                                <Button style={{marginLeft: \"10px\"}}>Перевести</Button>\n                                <Button onClick={this.openShop} style={{marginLeft: \"10px\"}}>Ускорения</Button>\n                            </Div>\n                        </div>\n\n                        <hr></hr>\n                        <Header level=\"2\">Автоматически: {this.state.user.auto}/сек</Header>\n                        {\n                            Object.keys(this.state.user.upgrades).length === 0 ?\n                                <div style={{display: 'flex', alignItems: 'center', flexDirection: 'column'}}><Button\n                                    style={{width: \"80%\", height: \"50px\"}} onClick={this.openShop}>Получить\n                                    улучшения</Button></div>\n                                : <HorizontalScroll>\n                                    <div style={{display: 'flex'}}><Upgrades upgrades={this.state.user.upgrades}/></div>\n                                </HorizontalScroll>\n                        }\n                        <div style={{textAlign: \"center\", marginTop: \"50px\"}}>\n                            <span>Онлайн: {this.state.online} чел.</span>\n                        </div>\n                        <div style={{display: 'flex', alignItems: 'center', flexDirection: 'column'}}>\n                            <Button onClick={this.click} className=\"click\">Клик</Button>\n                        </div>\n                    </Panel>\n                </View>\n            );\n        } else if (this.state.error !== null) {\n            if (this.state.error.type === 'platform') {\n                return (\n                    <div style={{textAlign: \"center\", padding: \"5px\", marginTop: \"100px\"}}>\n                        <span style={{fontSize: \"25px\", fontWeight: \"700\"}}>Приложение поддерживается только с мобильного приложения ВКонтакте</span>\n                    </div>\n                )\n            } else if (this.state.error.type === '2acc') {\n                return (\n                    <div style={{textAlign: \"center\", padding: \"5px\", marginTop: \"100px\"}}>\n                        <span style={{fontSize: \"25px\", fontWeight: \"700\"}}>Вы уже пользуетесь приложением с другого устройства</span>\n                    </div>\n                )\n            }\n        } else {\n            return (\n                <div style={{display: 'flex', alignItems: 'center', flexDirection: 'column'}}>\n                    <PanelSpinner/>\n                </div>\n            )\n        }\n    }\n}\n\nexport default App;\n","import 'core-js/es6/map';\nimport 'core-js/es6/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vkui-connect';\nimport App from './App';\n\nconnect.send('VKWebAppInit', {});\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}