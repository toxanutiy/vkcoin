{"version":3,"sources":["panels/Upgrades.js","App.js","index.js"],"names":["Upgrades","upgrades","this","props","Object","keys","map","key","react_default","a","createElement","vkui","style","height","borderRadius","marginLeft","textAlign","className","width","name","amount","mine","React","Component","socket","io","App","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","click","setState","prevState","user","objectSpread","balance","openShop","popout","marginTop","borderTopLeftRadius","borderTopRightRadius","aside","cancel_default","onClick","closeShop","fontWeight","state","shop","float","disabled","parseFloat","buyItem","_ref","asyncToGenerator","regenerator_default","mark","_callee","item","wrap","_context","prev","next","parseInt","abrupt","emit","stop","_x","apply","arguments","go","e","activePanel","currentTarget","dataset","to","bind","assertThisInitialized","_this2","connect","subscribe","detail","type","console","log","window","location","search","on","setInterval","auto","header","id","display","alignItems","flexDirection","level","length","panels_Upgrades","PanelSpinner_default","send","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.e5525c4f.chunk.js","sourcesContent":["import React from \"react\";\r\nimport {Div, Group} from '@vkontakte/vkui';\r\n\r\nclass Upgrades extends React.Component {\r\n    render() {\r\n        const upgrades = this.props.upgrades;\r\n        return (\r\n            Object.keys(upgrades).map((key) => (\r\n                <Group key={key} style={{height: \"60px\", borderRadius: \"20px\", marginLeft: \"10px\", textAlign: \"center\"}}>\r\n                    <Div className=\"upgrade\" style={{width: \"180px\"}}>\r\n                        <span className=\"name\">{upgrades[key].name} (x{upgrades[key].amount})</span><br></br>\r\n                        <span className=\"mine\">{upgrades[key].mine}/сек</span>\r\n                    </Div>\r\n                </Group>\r\n            ))\r\n        );\r\n    }\r\n}\r\n\r\nexport default Upgrades;\r\n","import React from 'react';\nimport connect from '@vkontakte/vkui-connect';\nimport {View, Panel, Header, Button, Div, HorizontalScroll, PopoutWrapper, Group} from '@vkontakte/vkui';\nimport PanelSpinner from '@vkontakte/vkui/dist/components/PanelSpinner/PanelSpinner';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport io from 'socket.io-client';\nimport './css/style.css';\nimport Upgrades from './panels/Upgrades.js'\nimport Icon24Cancel from '@vkontakte/icons/dist/24/cancel';\n\nlet socket = io('http://192.168.43.27:8080');\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            activePanel: 'spinner',\n            user: null,\n            popout: null,\n            buyItem: false\n        };\n\n        this.openShop = this.openShop.bind(this);\n    }\n\n    componentDidMount() {\n        connect.subscribe((e) => {\n            switch (e.detail.type) {\n                default:\n                    console.log(e.detail.type);\n            }\n        });\n\n        socket.emit('auth', window.location.search);\n\n        socket.on('setUser', user => {\n            this.setState({user: user, activePanel: 'main'});\n        });\n\n        socket.on('buysItem', user => {\n            this.setState({user: user, buyItem: false});\n        });\n\n        setInterval(() => {\n            if (this.state.user !== null && !this.state.buyItem)\n                socket.emit('setScore', this.state.user.balance);\n        }, 500);\n\n        setInterval( () => {\n            if (this.state.popout !== null && !this.state.buyItem) {\n                this.openShop();\n            }\n        }, 1000);\n\n        setInterval( () => {\n            if (this.state.user !== null)\n                this.setState(prevState => ({\n                     user: {\n                         ...prevState.user,\n                         balance: prevState.user.balance + this.state.user.auto\n                     }\n                }));\n        }, 1000);\n    }\n\n    click = () => {\n        this.setState(prevState => ({\n            user: {\n                ...prevState.user,\n                balance: prevState.user.balance + 1\n            }\n        }));\n    };\n\n    openShop = () => {\n        this.setState({\n            popout:\n                <PopoutWrapper>\n                    <Group style={{width: \"100%\", height: \"84%\", marginTop: \"39%\", borderTopLeftRadius: \"20px\", borderTopRightRadius: \"20px\"}}>\n                        <Div>\n                            <Header aside={<Icon24Cancel onClick={this.closeShop}/>}><span\n                                style={{fontWeight: \"700\"}}>Ускорения</span></Header>\n                            <hr></hr>\n                            <div className=\"scrollShop\">\n                                <div className=\"scrollShop_in\">\n                                    <div className=\"shops\">\n                                        {\n                                            Object.keys(this.state.user.shop).map((key) => (\n                                                <Group key={key} className=\"shop\">\n                                                    <Div className=\"upgrade\">\n                                                        <span className=\"name\">{this.state.user.shop[key]['name']}</span>\n                                                        <span className=\"name\" style={{float: \"right\"}}>+{this.state.user.shop[key]['mine']}/сек</span>\n                                                        <br></br>\n                                                        <Button disabled={(parseFloat(this.state.user.balance) < parseFloat(this.state.user.shop[key]['price']))} onClick={() => this.buyItem(key)} style={{marginTop: \"10px\"}}>Купить за {this.state.user.shop[key]['price']}</Button>\n                                                    </Div>\n                                                    <hr></hr>\n                                                </Group>\n                                            ))\n                                        }\n                                    </div>\n                                </div>\n                            </div>\n                        </Div>\n                    </Group>\n                </PopoutWrapper>\n        });\n    };\n\n    closeShop = () => {\n        this.setState({\n            popout: null\n        });\n    };\n\n    buyItem = async (key) => {\n        const item = this.state.user.shop[key];\n\n        if (parseInt(this.state.user.balance) < parseInt(item['price'])) return;\n\n        this.setState({buyItem: true});\n        await socket.emit('buyItem', key);\n    };\n\n    go = (e) => {\n        this.setState({activePanel: e.currentTarget.dataset.to})\n    };\n\n    render() {\n        if (this.state.user !== null) {\n            return (\n                <View popout={this.state.popout} header={false} activePanel={this.state.activePanel}>\n                    <Panel id=\"main\">\n                        <div style={{display: 'flex', alignItems: 'center', flexDirection: 'column'}}>\n                            <Header level=\"2\">Ваш счёт</Header>\n                            <span className=\"balance\">{this.state.user.balance}</span>\n\n                            <Div>\n                                <Button>Топ</Button>\n                                <Button style={{marginLeft: \"10px\"}}>Перевести</Button>\n                                <Button onClick={this.openShop} style={{marginLeft: \"10px\"}}>Ускорения</Button>\n                            </Div>\n                        </div>\n\n                        <hr></hr>\n                        <Header level=\"2\">Автоматически: {this.state.user.auto}/сек</Header>\n                        {\n                            Object.keys(this.state.user.upgrades).length === 0 ?\n                                <div style={{display: 'flex', alignItems: 'center', flexDirection: 'column'}}><Button\n                                    style={{width: \"80%\", height: \"50px\"}} onClick={this.openShop}>Получить\n                                    улучшения</Button></div>\n                                : <HorizontalScroll>\n                                    <div style={{display: 'flex'}}><Upgrades upgrades={this.state.user.upgrades}/></div>\n                                </HorizontalScroll>\n                        }\n                        <div style={{display: 'flex', alignItems: 'center', flexDirection: 'column'}}>\n                            <Button onClick={this.click} className=\"click\">Клик</Button>\n                        </div>\n                    </Panel>\n                </View>\n            );\n        } else {\n            return (\n                <div style={{display: 'flex', alignItems: 'center', flexDirection: 'column'}}>\n                    <PanelSpinner/>\n                </div>\n            )\n        }\n    }\n}\n\nexport default App;\n","import 'core-js/es6/map';\nimport 'core-js/es6/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vkui-connect';\nimport App from './App';\n\nconnect.send('VKWebAppInit', {});\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}