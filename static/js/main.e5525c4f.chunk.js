(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{171:function(e,t){},174:function(e,t,a){},175:function(e,t,a){"use strict";a.r(t);a(97),a(122);var n=a(0),r=a.n(n),l=a(49),s=a.n(l),c=a(28),u=a.n(c),i=a(51),o=a.n(i),p=a(93),m=a(52),h=a(29),d=a(30),b=a(32),f=a(31),E=a(33),y=a(19),v=a(1),g=a(94),x=a.n(g),k=(a(144),a(95)),I=a.n(k),S=(a(174),function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.upgrades;return Object.keys(e).map(function(t){return r.a.createElement(v.Group,{key:t,style:{height:"60px",borderRadius:"20px",marginLeft:"10px",textAlign:"center"}},r.a.createElement(v.Div,{className:"upgrade",style:{width:"180px"}},r.a.createElement("span",{className:"name"},e[t].name," (x",e[t].amount,")"),r.a.createElement("br",null),r.a.createElement("span",{className:"mine"},e[t].mine,"/\u0441\u0435\u043a")))})}}]),t}(r.a.Component)),j=a(50),O=a.n(j),w=I()("http://192.168.43.27:8080"),N=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(b.a)(this,Object(f.a)(t).call(this,e))).click=function(){a.setState(function(e){return{user:Object(m.a)({},e.user,{balance:e.user.balance+1})}})},a.openShop=function(){a.setState({popout:r.a.createElement(v.PopoutWrapper,null,r.a.createElement(v.Group,{style:{width:"100%",height:"84%",marginTop:"39%",borderTopLeftRadius:"20px",borderTopRightRadius:"20px"}},r.a.createElement(v.Div,null,r.a.createElement(v.Header,{aside:r.a.createElement(O.a,{onClick:a.closeShop})},r.a.createElement("span",{style:{fontWeight:"700"}},"\u0423\u0441\u043a\u043e\u0440\u0435\u043d\u0438\u044f")),r.a.createElement("hr",null),r.a.createElement("div",{className:"scrollShop"},r.a.createElement("div",{className:"scrollShop_in"},r.a.createElement("div",{className:"shops"},Object.keys(a.state.user.shop).map(function(e){return r.a.createElement(v.Group,{key:e,className:"shop"},r.a.createElement(v.Div,{className:"upgrade"},r.a.createElement("span",{className:"name"},a.state.user.shop[e].name),r.a.createElement("span",{className:"name",style:{float:"right"}},"+",a.state.user.shop[e].mine,"/\u0441\u0435\u043a"),r.a.createElement("br",null),r.a.createElement(v.Button,{disabled:parseFloat(a.state.user.balance)<parseFloat(a.state.user.shop[e].price),onClick:function(){return a.buyItem(e)},style:{marginTop:"10px"}},"\u041a\u0443\u043f\u0438\u0442\u044c \u0437\u0430 ",a.state.user.shop[e].price)),r.a.createElement("hr",null))})))))))})},a.closeShop=function(){a.setState({popout:null})},a.buyItem=function(){var e=Object(p.a)(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.state.user.shop[t],!(parseInt(a.state.user.balance)<parseInt(n.price))){e.next=3;break}return e.abrupt("return");case 3:return a.setState({buyItem:!0}),e.next=6,w.emit("buyItem",t);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.go=function(e){a.setState({activePanel:e.currentTarget.dataset.to})},a.state={activePanel:"spinner",user:null,popout:null,buyItem:!1},a.openShop=a.openShop.bind(Object(y.a)(Object(y.a)(a))),a}return Object(E.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;u.a.subscribe(function(e){e.detail.type,console.log(e.detail.type)}),w.emit("auth",window.location.search),w.on("setUser",function(t){e.setState({user:t,activePanel:"main"})}),w.on("buysItem",function(t){e.setState({user:t,buyItem:!1})}),setInterval(function(){null===e.state.user||e.state.buyItem||w.emit("setScore",e.state.user.balance)},500),setInterval(function(){null===e.state.popout||e.state.buyItem||e.openShop()},1e3),setInterval(function(){null!==e.state.user&&e.setState(function(t){return{user:Object(m.a)({},t.user,{balance:t.user.balance+e.state.user.auto})}})},1e3)}},{key:"render",value:function(){return null!==this.state.user?r.a.createElement(v.View,{popout:this.state.popout,header:!1,activePanel:this.state.activePanel},r.a.createElement(v.Panel,{id:"main"},r.a.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"column"}},r.a.createElement(v.Header,{level:"2"},"\u0412\u0430\u0448 \u0441\u0447\u0451\u0442"),r.a.createElement("span",{className:"balance"},this.state.user.balance),r.a.createElement(v.Div,null,r.a.createElement(v.Button,null,"\u0422\u043e\u043f"),r.a.createElement(v.Button,{style:{marginLeft:"10px"}},"\u041f\u0435\u0440\u0435\u0432\u0435\u0441\u0442\u0438"),r.a.createElement(v.Button,{onClick:this.openShop,style:{marginLeft:"10px"}},"\u0423\u0441\u043a\u043e\u0440\u0435\u043d\u0438\u044f"))),r.a.createElement("hr",null),r.a.createElement(v.Header,{level:"2"},"\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438: ",this.state.user.auto,"/\u0441\u0435\u043a"),0===Object.keys(this.state.user.upgrades).length?r.a.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"column"}},r.a.createElement(v.Button,{style:{width:"80%",height:"50px"},onClick:this.openShop},"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0443\u043b\u0443\u0447\u0448\u0435\u043d\u0438\u044f")):r.a.createElement(v.HorizontalScroll,null,r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(S,{upgrades:this.state.user.upgrades}))),r.a.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"column"}},r.a.createElement(v.Button,{onClick:this.click,className:"click"},"\u041a\u043b\u0438\u043a")))):r.a.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"column"}},r.a.createElement(x.a,null))}}]),t}(r.a.Component);u.a.send("VKWebAppInit",{}),s.a.render(r.a.createElement(N,null),document.getElementById("root"))},96:function(e,t,a){e.exports=a(175)}},[[96,1,2]]]);
//# sourceMappingURL=main.e5525c4f.chunk.js.map