{"version":3,"sources":["panels/Upgrades.js","App.js","index.js"],"names":["Upgrades","upgrades","this","props","Object","keys","map","key","react_default","a","createElement","vkui","style","height","borderRadius","marginLeft","textAlign","className","width","name","amount","mine","React","Component","socket","io","App","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","click","setState","prevState","user","objectSpread","balance","openShop","popout","marginTop","borderTopLeftRadius","borderTopRightRadius","aside","cancel_default","onClick","closeShop","fontWeight","state","shop","float","disabled","parseFloat","buyItem","_ref","asyncToGenerator","regenerator_default","mark","_callee","item","wrap","_context","prev","next","parseInt","abrupt","emit","stop","_x","apply","arguments","go","e","activePanel","currentTarget","dataset","to","error","online","bind","assertThisInitialized","_this2","connect","subscribe","detail","type","console","log","window","location","search","on","setInterval","auto","header","id","display","alignItems","flexDirection","level","length","panels_Upgrades","PanelSpinner_default","padding","fontSize","send","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.4453ede6.chunk.js","sourcesContent":["import React from \"react\";\r\nimport {Div, Group} from '@vkontakte/vkui';\r\n\r\nclass Upgrades extends React.Component {\r\n    render() {\r\n        const upgrades = this.props.upgrades;\r\n        return (\r\n            Object.keys(upgrades).map((key) => (\r\n                <Group key={key} style={{height: \"60px\", borderRadius: \"20px\", marginLeft: \"10px\", textAlign: \"center\"}}>\r\n                    <Div className=\"upgrade\" style={{width: \"185px\"}}>\r\n                        <span className=\"name\">{upgrades[key].name} (x{upgrades[key].amount})</span><br></br>\r\n                        <span className=\"mine\">{upgrades[key].mine}/сек</span>\r\n                    </Div>\r\n                </Group>\r\n            ))\r\n        );\r\n    }\r\n}\r\n\r\nexport default Upgrades;\r\n","import React from 'react';\nimport connect from '@vkontakte/vkui-connect';\nimport {View, Panel, Header, Button, Div, HorizontalScroll, PopoutWrapper, Group} from '@vkontakte/vkui';\nimport PanelSpinner from '@vkontakte/vkui/dist/components/PanelSpinner/PanelSpinner';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport io from 'socket.io-client';\nimport './css/style.css';\nimport Upgrades from './panels/Upgrades.js'\nimport Icon24Cancel from '@vkontakte/icons/dist/24/cancel';\n\nlet socket = io('http://194.67.207.217:8080');\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            activePanel: 'spinner',\n            user: null,\n            popout: null,\n            buyItem: false,\n            error: null,\n            online: 0\n        };\n\n        this.openShop = this.openShop.bind(this);\n    }\n\n    componentDidMount() {\n        connect.subscribe((e) => {\n            switch (e.detail.type) {\n                default:\n                    console.log(e.detail.type);\n            }\n        });\n\n        socket.emit('auth', window.location.search);\n\n        socket.on('setUser', user => {\n            this.setState({user: user, activePanel: 'main'});\n        });\n\n        socket.on('buysItem', user => {\n            this.setState({user: user, buyItem: false});\n        });\n\n        socket.on('errorConnect', error => {\n            this.setState({error: error});\n        });\n\n        socket.on('online', online => {\n            this.setState({online: online});\n        });\n\n        setInterval(() => {\n            if (this.state.user !== null && !this.state.buyItem)\n                socket.emit('setScore', this.state.user.balance);\n        }, 500);\n\n        setInterval(() => {\n            if (this.state.popout !== null && !this.state.buyItem) {\n                this.openShop();\n            }\n        }, 1000);\n\n        setInterval(() => {\n            if (this.state.user !== null)\n                this.setState(prevState => ({\n                    user: {\n                        ...prevState.user,\n                        balance: prevState.user.balance + this.state.user.auto\n                    }\n                }));\n        }, 1000);\n    }\n\n    click = () => {\n        this.setState(prevState => ({\n            user: {\n                ...prevState.user,\n                balance: prevState.user.balance + 1\n            }\n        }));\n    };\n\n    openShop = () => {\n        this.setState({\n            popout:\n                <PopoutWrapper>\n\n                    <Group style={{\n                        width: \"100%\",\n                        height: \"84%\",\n                        marginTop: \"39%\",\n                        borderTopLeftRadius: \"20px\",\n                        borderTopRightRadius: \"20px\"\n                    }}>\n                        <Div>\n                            <Header aside={<Icon24Cancel onClick={this.closeShop}/>}><span\n                                style={{fontWeight: \"700\"}}>Ускорения</span></Header>\n                            <hr></hr>\n                            <div className=\"scrollShop\">\n                                <div className=\"scrollShop_in\">\n                                    <div className=\"shops\">\n                                        {\n                                            Object.keys(this.state.user.shop).map((key) => (\n                                                <Group key={key} className=\"shop\">\n                                                    <Div className=\"upgrade\">\n                                                        <span\n                                                            className=\"name\">{this.state.user.shop[key]['name']}</span>\n                                                        <span className=\"name\"\n                                                              style={{float: \"right\"}}>+{this.state.user.shop[key]['mine']}/сек</span>\n                                                        <br></br>\n                                                        <Button\n                                                            disabled={(parseFloat(this.state.user.balance) < parseFloat(this.state.user.shop[key]['price']))}\n                                                            onClick={() => this.buyItem(key)}\n                                                            style={{marginTop: \"10px\"}}>Купить\n                                                            за {this.state.user.shop[key]['price']}</Button>\n                                                    </Div>\n                                                    <hr></hr>\n                                                </Group>\n                                            ))\n                                        }\n                                    </div>\n                                </div>\n                            </div>\n                        </Div>\n                    </Group>\n\n                </PopoutWrapper>\n        });\n    };\n\n    closeShop = () => {\n        this.setState({\n            popout: null\n        });\n    };\n\n    buyItem = async (key) => {\n        const item = this.state.user.shop[key];\n\n        if (parseInt(this.state.user.balance) < parseInt(item['price'])) return;\n\n        this.setState({buyItem: true});\n        await socket.emit('buyItem', key);\n    };\n\n    go = (e) => {\n        this.setState({activePanel: e.currentTarget.dataset.to})\n    };\n\n    render() {\n        if (this.state.user !== null) {\n            return (\n                <View popout={this.state.popout} header={false} activePanel={this.state.activePanel}>\n                    <Panel id=\"main\">\n                        <div style={{display: 'flex', alignItems: 'center', flexDirection: 'column'}}>\n                            <Header level=\"2\">Ваш счёт</Header>\n                            <span className=\"balance\">{this.state.user.balance}</span>\n\n                            <Div>\n                                <Button>Топ</Button>\n                                <Button style={{marginLeft: \"10px\"}}>Перевести</Button>\n                                <Button onClick={this.openShop} style={{marginLeft: \"10px\"}}>Ускорения</Button>\n                            </Div>\n                        </div>\n\n                        <hr></hr>\n                        <Header level=\"2\">Автоматически: {this.state.user.auto}/сек</Header>\n                        {\n                            Object.keys(this.state.user.upgrades).length === 0 ?\n                                <div style={{display: 'flex', alignItems: 'center', flexDirection: 'column'}}><Button\n                                    style={{width: \"80%\", height: \"50px\"}} onClick={this.openShop}>Получить\n                                    улучшения</Button></div>\n                                : <HorizontalScroll>\n                                    <div style={{display: 'flex'}}><Upgrades upgrades={this.state.user.upgrades}/></div>\n                                </HorizontalScroll>\n                        }\n                        <div style={{textAlign: \"center\", marginTop: \"50px\"}}>\n                            <span>Онлайн: {this.state.online} чел.</span>\n                        </div>\n                        <div style={{display: 'flex', alignItems: 'center', flexDirection: 'column'}}>\n                            <Button onClick={this.click} className=\"click\">Клик</Button>\n                        </div>\n                    </Panel>\n                </View>\n            );\n        } else if (this.state.error !== null) {\n            if (this.state.error.type === 'platform') {\n                return (\n                    <div style={{textAlign: \"center\", padding: \"5px\", marginTop: \"100px\"}}>\n                        <span style={{fontSize: \"25px\", fontWeight: \"700\"}}>Приложение поддерживается только с мобильного приложения ВКонтакте</span>\n                    </div>\n                )\n            } else if (this.state.error.type === '2acc') {\n                return (\n                    <div style={{textAlign: \"center\", padding: \"5px\", marginTop: \"100px\"}}>\n                        <span style={{fontSize: \"25px\", fontWeight: \"700\"}}>Вы уже пользуетесь приложением с другого устройства</span>\n                    </div>\n                )\n            }\n        } else {\n            return (\n                <div style={{display: 'flex', alignItems: 'center', flexDirection: 'column'}}>\n                    <PanelSpinner/>\n                </div>\n            )\n        }\n    }\n}\n\nexport default App;\n","import 'core-js/es6/map';\nimport 'core-js/es6/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vkui-connect';\nimport App from './App';\n\nconnect.send('VKWebAppInit', {});\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}