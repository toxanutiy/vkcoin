{"version":3,"sources":["panels/Upgrades.js","App.js","index.js"],"names":["Upgrades","upgrades","this","props","Object","keys","map","key","react_default","a","createElement","vkui","style","height","borderRadius","marginLeft","textAlign","className","width","name","amount","mine","React","Component","socket","io","secure","App","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","click","setState","prevState","user","objectSpread","balance","openShop","popout","marginTop","borderTopLeftRadius","borderTopRightRadius","aside","cancel_default","onClick","closeShop","fontWeight","state","shop","float","disabled","parseFloat","buyItem","_ref","asyncToGenerator","regenerator_default","mark","_callee","item","wrap","_context","prev","next","parseInt","abrupt","emit","stop","_x","apply","arguments","go","e","activePanel","currentTarget","dataset","to","error","online","bind","assertThisInitialized","_this2","connect","subscribe","detail","type","console","log","window","location","search","on","setInterval","auto","header","id","display","alignItems","flexDirection","level","length","panels_Upgrades","PanelSpinner_default","padding","fontSize","send","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.cf7bbba9.chunk.js","sourcesContent":["import React from \"react\";\r\nimport {Div, Group} from '@vkontakte/vkui';\r\n\r\nclass Upgrades extends React.Component {\r\n    render() {\r\n        const upgrades = this.props.upgrades;\r\n        return (\r\n            Object.keys(upgrades).map((key) => (\r\n                <Group key={key} style={{height: \"60px\", borderRadius: \"20px\", marginLeft: \"10px\", textAlign: \"center\"}}>\r\n                    <Div className=\"upgrade\" style={{width: \"185px\"}}>\r\n                        <span className=\"name\">{upgrades[key].name} (x{upgrades[key].amount})</span><br></br>\r\n                        <span className=\"mine\">{upgrades[key].mine}/сек</span>\r\n                    </Div>\r\n                </Group>\r\n            ))\r\n        );\r\n    }\r\n}\r\n\r\nexport default Upgrades;\r\n","import React from 'react';\nimport connect from '@vkontakte/vkui-connect';\nimport {View, Panel, Header, Button, Div, HorizontalScroll, PopoutWrapper, Group} from '@vkontakte/vkui';\nimport PanelSpinner from '@vkontakte/vkui/dist/components/PanelSpinner/PanelSpinner';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport io from 'socket.io-client';\nimport './css/style.css';\nimport Upgrades from './panels/Upgrades.js'\nimport Icon24Cancel from '@vkontakte/icons/dist/24/cancel';\n\nlet socket = io('https://vkcoinadad.tk:8080', {secure: true});\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            activePanel: 'spinner',\n            user: null,\n            popout: null,\n            buyItem: false,\n            error: null,\n            online: 0\n        };\n\n        this.openShop = this.openShop.bind(this);\n    }\n\n    componentDidMount() {\n        connect.subscribe((e) => {\n            switch (e.detail.type) {\n                default:\n                    console.log(e.detail.type);\n            }\n        });\n\n        socket.emit('auth', window.location.search);\n\n        socket.on('setUser', user => {\n            this.setState({user: user, activePanel: 'main'});\n        });\n\n        socket.on('buysItem', user => {\n            this.setState({user: user, buyItem: false});\n        });\n\n        socket.on('errorConnect', error => {\n            this.setState({error: error});\n        });\n\n        socket.on('online', online => {\n            this.setState({online: online});\n        });\n\n        setInterval(() => {\n            if (this.state.user !== null && !this.state.buyItem)\n                socket.emit('setScore', this.state.user.balance);\n        }, 500);\n\n        setInterval(() => {\n            if (this.state.popout !== null && !this.state.buyItem) {\n                this.openShop();\n            }\n        }, 1000);\n\n        setInterval(() => {\n            if (this.state.user !== null)\n                this.setState(prevState => ({\n                    user: {\n                        ...prevState.user,\n                        balance: prevState.user.balance + this.state.user.auto\n                    }\n                }));\n        }, 1000);\n    }\n\n    click = () => {\n        this.setState(prevState => ({\n            user: {\n                ...prevState.user,\n                balance: prevState.user.balance + 1\n            }\n        }));\n    };\n\n    openShop = () => {\n        this.setState({\n            popout:\n                <PopoutWrapper>\n\n                    <Group style={{\n                        width: \"100%\",\n                        height: \"84%\",\n                        marginTop: \"39%\",\n                        borderTopLeftRadius: \"20px\",\n                        borderTopRightRadius: \"20px\"\n                    }}>\n                        <Div>\n                            <Header aside={<Icon24Cancel onClick={this.closeShop}/>}><span\n                                style={{fontWeight: \"700\"}}>Ускорения</span></Header>\n                            <hr></hr>\n                            <div className=\"scrollShop\">\n                                <div className=\"scrollShop_in\">\n                                    <div className=\"shops\">\n                                        {\n                                            Object.keys(this.state.user.shop).map((key) => (\n                                                <Group key={key} className=\"shop\">\n                                                    <Div className=\"upgrade\">\n                                                        <span\n                                                            className=\"name\">{this.state.user.shop[key]['name']}</span>\n                                                        <span className=\"name\"\n                                                              style={{float: \"right\"}}>+{this.state.user.shop[key]['mine']}/сек</span>\n                                                        <br></br>\n                                                        <Button\n                                                            disabled={(parseFloat(this.state.user.balance) < parseFloat(this.state.user.shop[key]['price']))}\n                                                            onClick={() => this.buyItem(key)}\n                                                            style={{marginTop: \"10px\"}}>Купить\n                                                            за {this.state.user.shop[key]['price']}</Button>\n                                                    </Div>\n                                                    <hr></hr>\n                                                </Group>\n                                            ))\n                                        }\n                                    </div>\n                                </div>\n                            </div>\n                        </Div>\n                    </Group>\n\n                </PopoutWrapper>\n        });\n    };\n\n    closeShop = () => {\n        this.setState({\n            popout: null\n        });\n    };\n\n    buyItem = async (key) => {\n        const item = this.state.user.shop[key];\n\n        if (parseInt(this.state.user.balance) < parseInt(item['price'])) return;\n\n        this.setState({buyItem: true});\n        await socket.emit('buyItem', key);\n    };\n\n    go = (e) => {\n        this.setState({activePanel: e.currentTarget.dataset.to})\n    };\n\n    render() {\n        if (this.state.user !== null) {\n            return (\n                <View popout={this.state.popout} header={false} activePanel={this.state.activePanel}>\n                    <Panel id=\"main\">\n                        <div style={{display: 'flex', alignItems: 'center', flexDirection: 'column'}}>\n                            <Header level=\"2\">Ваш счёт</Header>\n                            <span className=\"balance\">{this.state.user.balance}</span>\n\n                            <Div>\n                                <Button>Топ</Button>\n                                <Button style={{marginLeft: \"10px\"}}>Перевести</Button>\n                                <Button onClick={this.openShop} style={{marginLeft: \"10px\"}}>Ускорения</Button>\n                            </Div>\n                        </div>\n\n                        <hr></hr>\n                        <Header level=\"2\">Автоматически: {this.state.user.auto}/сек</Header>\n                        {\n                            Object.keys(this.state.user.upgrades).length === 0 ?\n                                <div style={{display: 'flex', alignItems: 'center', flexDirection: 'column'}}><Button\n                                    style={{width: \"80%\", height: \"50px\"}} onClick={this.openShop}>Получить\n                                    улучшения</Button></div>\n                                : <HorizontalScroll>\n                                    <div style={{display: 'flex'}}><Upgrades upgrades={this.state.user.upgrades}/></div>\n                                </HorizontalScroll>\n                        }\n                        <div style={{textAlign: \"center\", marginTop: \"50px\"}}>\n                            <span>Онлайн: {this.state.online} чел.</span>\n                        </div>\n                        <div style={{display: 'flex', alignItems: 'center', flexDirection: 'column'}}>\n                            <Button onClick={this.click} className=\"click\">Клик</Button>\n                        </div>\n                    </Panel>\n                </View>\n            );\n        } else if (this.state.error !== null) {\n            if (this.state.error.type === 'platform') {\n                return (\n                    <div style={{textAlign: \"center\", padding: \"5px\", marginTop: \"100px\"}}>\n                        <span style={{fontSize: \"25px\", fontWeight: \"700\"}}>Приложение поддерживается только с мобильного приложения ВКонтакте</span>\n                    </div>\n                )\n            } else if (this.state.error.type === '2acc') {\n                return (\n                    <div style={{textAlign: \"center\", padding: \"5px\", marginTop: \"100px\"}}>\n                        <span style={{fontSize: \"25px\", fontWeight: \"700\"}}>Вы уже пользуетесь приложением с другого устройства</span>\n                    </div>\n                )\n            }\n        } else {\n            return (\n                <div style={{display: 'flex', alignItems: 'center', flexDirection: 'column'}}>\n                    <PanelSpinner/>\n                </div>\n            )\n        }\n    }\n}\n\nexport default App;\n","import 'core-js/es6/map';\nimport 'core-js/es6/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vkui-connect';\nimport App from './App';\n\nconnect.send('VKWebAppInit', {});\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}